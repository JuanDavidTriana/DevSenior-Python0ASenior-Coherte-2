<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Taller Práctico: Depuración y Optimización de Conexiones Python-PostgreSQL con Asistencia de IA</title>
  <!-- Google Fonts: Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome 6 CDN -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
  <!-- Prism.js CSS para resaltado de sintaxis -->
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet" />
  <style>
    body { background: #f8f9fa; color: #212529; }
    .accent { color: #6C47FF; }
    .accordion-button:not(.collapsed) { color: #0d6efd; background: #e9ecef; }
    .accordion-button .fa-fw { margin-right: 0.5em; }
    .accordion-item { border-radius: 1rem; margin-bottom: 1.5rem; overflow: hidden; }
    .accordion-button { font-weight: 600; font-size: 1.15rem; }
    .accordion-body h5 { color: #6C47FF; font-weight: 600; }
    .footer { background: #e9ecef; color: #6C47FF; padding: 1rem 0; text-align: center; margin-top: 3rem; }
    @media (max-width: 767.98px) {
      .accordion-button { font-size: 1rem; }
    }
    html {
      scroll-behavior: smooth;
    }
    .hero-header {
      background: #6C47FF;
      color: #fff;
      border-radius: 0 0 2rem 2rem;
      min-height: 550px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 24px 0 rgba(108,71,255,0.10);
    }
    .hero-header h1 {
      color: #fff !important;
      text-shadow: 0 2px 8px rgba(44,34,80,0.10);
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="hero-header mb-4">
    <div class="container text-center py-5">
      <h1 class="display-4 fw-bold mb-3" style="font-family: 'Poppins', sans-serif; color: #fff; letter-spacing: -1px;">
        Taller Práctico: Depuración y Optimización de Conexiones Python-PostgreSQL con Asistencia de IA
      </h1>
    </div>
  </header>

  <!-- Navbar Mejorado -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm sticky-top mb-5" style="z-index: 1030;">
    <div class="container">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarModulos" aria-controls="navbarModulos" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarModulos">
        <ul class="navbar-nav gap-2">
          <li class="nav-item">
            <a class="nav-link accent fw-semibold" href="#modulo1"><i class="fas fa-key fa-fw"></i> Módulo 1</a>
          </li>
          <li class="nav-item">
            <a class="nav-link accent fw-semibold" href="#modulo2"><i class="fas fa-bug-slash fa-fw"></i> Módulo 2</a>
          </li>
          <li class="nav-item">
            <a class="nav-link accent fw-semibold" href="#modulo3"><i class="fas fa-arrows-spin fa-fw"></i> Módulo 3</a>
          </li>
          <li class="nav-item">
            <a class="nav-link accent fw-semibold" href="#modulo4"><i class="fas fa-robot fa-fw"></i> Módulo 4</a>
          </li>
          <li class="nav-item">
            <a class="nav-link accent fw-semibold" href="#modulo5"><i class="fas fa-broom fa-fw"></i> Módulo 5</a>
          </li>
          <li class="nav-item">
            <a class="nav-link accent fw-semibold" href="#modulo6"><i class="fas fa-graduation-cap fa-fw"></i> Módulo 6</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Objetivos y Prerrequisitos -->
  <section class="container mb-5">
    <div class="row g-4 justify-content-center">
      <div class="col-md-6">
        <div class="p-4 h-100 bg-white rounded-4 shadow-sm border-0">
          <h3 class="accent mb-3 text-uppercase fw-bold fs-5"><i class="fas fa-bullseye fa-fw"></i> Objetivos de Aprendizaje</h3>
          <ul class="mb-0 fs-6">
            <li>Configurar un proyecto de Python de forma segura utilizando variables de entorno.</li>
            <li>Diagnosticar y solucionar los errores más comunes de conexión y de integridad de datos.</li>
            <li>Implementar un flujo de datos CRUD de forma segura y eficiente.</li>
            <li>Utilizar herramientas de IA para revisar, depurar y mejorar la calidad del código.</li>
            <li>Refactorizar código para hacerlo más seguro, legible y mantenible.</li>
          </ul>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-4 h-100 bg-white rounded-4 shadow-sm border-0">
          <h3 class="accent mb-3 text-uppercase fw-bold fs-5"><i class="fas fa-check-circle fa-fw"></i> Prerrequisitos</h3>
          <ul class="mb-0 fs-6">
            <li>Conocimientos básicos de Python y SQL.</li>
            <li>Python y PostgreSQL instalados.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  

  <!-- Módulos del Taller (Acordeón) -->
  <main class="container mb-5">
    <h2 class="accent mb-4 text-center fw-bold" style="font-family: 'Poppins', sans-serif; color: #6C47FF;"><i class="fas fa-layer-group fa-fw"></i> Módulos del Taller</h2>
    <div class="accordion" id="accordionTaller">

      <!-- Módulo 1 -->
      <div class="accordion-item" id="modulo1">
        <h2 class="accordion-header" id="heading1">
          <button class="accordion-button accent fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">
            <i class="fas fa-key fa-fw"></i> Módulo 1: Configuración Segura con Variables de Entorno
          </button>
        </h2>
        <div id="collapse1" class="accordion-collapse collapse show" aria-labelledby="heading1" data-bs-parent="#accordionTaller">
          <div class="accordion-body">
            <h5>Teoría</h5>
            <p>
              Configurar correctamente las variables de entorno es el primer paso para desarrollar aplicaciones seguras y profesionales en Python.<br>
              Las variables de entorno permiten separar información sensible (como credenciales de bases de datos, claves de API, etc.) del código fuente.<br>
              Esto evita que datos críticos queden expuestos en repositorios públicos o sean compartidos accidentalmente.
            </p>
            <ul>
              <li><b>¿Por qué no debes "hardcodear" credenciales?</b><br>
                Si escribes tus contraseñas o usuarios directamente en el código, cualquiera que tenga acceso al repositorio podrá verlas.<br>
                Es una mala práctica que dificulta el mantenimiento y la portabilidad del proyecto.<br>
                Cambiar credenciales requiere modificar el código y volver a desplegar la aplicación.
              </li>
              <li><b>¿Qué es un archivo <code>.env</code>?</b><br>
                Es un archivo de texto plano donde defines variables clave-valor, por ejemplo:<br>
                <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-text">DB_NAME=midb
DB_USER=usuario
DB_PASS=contraseña_segura
DB_HOST=localhost
DB_PORT=5432</code></pre>
                Este archivo <b>no debe subirse nunca al repositorio</b>. Por eso, se agrega a <code>.gitignore</code>.
              </li>
              <li><b>¿Por qué usar <code>.gitignore</code>?</b><br>
                El archivo <code>.gitignore</code> le indica a Git qué archivos o carpetas no deben ser rastreados ni subidos al repositorio.<br>
                Así, tus credenciales y configuraciones locales permanecen seguras.
              </li>
              <li><b>¿Cómo se cargan las variables en Python?</b><br>
                Usando la librería <code>python-dotenv</code>, puedes cargar automáticamente las variables del archivo <code>.env</code> al entorno de ejecución de Python.<br>
                Esto te permite acceder a ellas con <code>os.getenv('NOMBRE_VARIABLE')</code>.
              </li>
            </ul>
            <div class="alert alert-primary"><b>Tip:</b> Siempre crea un archivo <code>.env.example</code> con las variables necesarias (pero sin valores reales) para que otros desarrolladores sepan qué deben configurar.</div>
            <div class="alert alert-warning"><b>Recomendación:</b> Nunca subas tu archivo <code>.env</code> real ni credenciales a ningún repositorio, ni siquiera privado.</div>
            <h5 class="mt-4">Actividad Práctica: Creando tu Entorno Seguro</h5>
            <ul>
              <li>Crear archivos <code>.env</code> y <code>.gitignore</code>.</li>
              <li>Instalar <code>python-dotenv</code>.</li>
              <li>Escribir un script para cargar y verificar las variables.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Módulo 2 -->
      <div class="accordion-item" id="modulo2">
        <h2 class="accordion-header" id="heading2">
          <button class="accordion-button collapsed accent fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
            <i class="fas fa-bug-slash fa-fw"></i> Módulo 2: La Conexión y los Errores Clásicos
          </button>
        </h2>
        <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="heading2" data-bs-parent="#accordionTaller">
          <div class="accordion-body">
            <h5>Teoría</h5>
            <p>
              Establecer una conexión robusta con la base de datos es fundamental para cualquier aplicación profesional. En Python, la librería estándar para conectarse a PostgreSQL es <code>psycopg2</code>. Usar variables de entorno para las credenciales y parámetros de conexión es una práctica esencial para la seguridad y la portabilidad.
            </p>
            <b>Importancia de usar try/except</b>
            <p>
              El uso de bloques <code>try/except</code> es fundamental en la programación con bases de datos porque:<br>
              - Permite capturar y manejar errores de manera controlada, evitando que la aplicación se detenga abruptamente.<br>
              - Facilita mostrar mensajes claros al usuario o registrar los errores para su posterior análisis.<br>
              - Permite realizar acciones de limpieza, como cerrar conexiones o hacer rollback de transacciones, incluso si ocurre un error.
            </p>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">try:
    # Operación que puede fallar
    conn = psycopg2.connect(...)
    # ... más operaciones ...
except psycopg2.Error as e:
    print("Ocurrió un error con la base de datos:", e)
finally:
    if 'conn' in locals() and conn:
        conn.close()
</code></pre>
            <div class="alert alert-primary"><b>Tip:</b> Siempre maneja los errores más específicos primero (por ejemplo, <code>OperationalError</code>, <code>IntegrityError</code>) y luego los más generales (<code>psycopg2.Error</code>).</div>
            <b>Anatomía de una conexión segura con psycopg2:</b>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">import os
import psycopg2
from dotenv import load_dotenv

load_dotenv()  # Carga las variables de entorno

try:
    conn = psycopg2.connect(
        dbname=os.getenv("DB_NAME"),
        user=os.getenv("DB_USER"),
        password=os.getenv("DB_PASS"),
        host=os.getenv("DB_HOST"),
        port=os.getenv("DB_PORT", 5432)
    )
    print("¡Conexión exitosa!")
except psycopg2.OperationalError as e:
    print("Error de conexión:", e)
finally:
    if 'conn' in locals() and conn:
        conn.close()
        print("Conexión cerrada")
</code></pre>
            <b>Errores comunes al conectar y manipular datos:</b>
            <div>
              <p>El trabajo con bases de datos implica enfrentarse a distintos tipos de errores. Identificarlos y entender su causa es clave para desarrollar aplicaciones robustas y fáciles de mantener. A continuación, se describen los errores más frecuentes al trabajar con PostgreSQL y <code>psycopg2</code>:</p>

              <ul>
                <li><b>OperationalError</b><br>
                  <b>¿Cuándo ocurre?</b> Cuando hay problemas de red, credenciales incorrectas, la base de datos está caída, el puerto es incorrecto o el servidor no está disponible.<br>
                  <b>Ejemplo de código que lo produce:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">conn = psycopg2.connect(
    dbname="midb",
    user="usuario",
    password="contraseña_incorrecta",
    host="localhost"
)</code></pre>
                  <b>Mensaje típico:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-text">psycopg2.OperationalError: FATAL: password authentication failed for user "usuario"</code></pre>
                  <b>¿Cómo prevenirlo?</b> Verifica que las credenciales sean correctas, que el servidor esté en ejecución y que el puerto sea el adecuado.<br>
                  <b>¿Cómo solucionarlo?</b> Corrige usuario, contraseña, host o puerto. Asegúrate de que la base de datos esté activa.
                </li>
                <li class="mt-3"><b>ProgrammingError</b><br>
                  <b>¿Cuándo ocurre?</b> Cuando hay errores de sintaxis SQL, se usan parámetros incorrectos, o se hace referencia a tablas o columnas que no existen.<br>
                  <b>Ejemplo de código que lo produce:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">with conn.cursor() as cur:
    cur.execute("SELECT nombre_inexistente FROM usuarios")</code></pre>
                  <b>Mensaje típico:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-text">psycopg2.ProgrammingError: column "nombre_inexistente" does not exist</code></pre>
                  <b>¿Cómo prevenirlo?</b> Revisa la sintaxis SQL y asegúrate de que las tablas y columnas existen.<br>
                  <b>¿Cómo solucionarlo?</b> Corrige el nombre de la columna o tabla en la consulta.
                </li>
                <li class="mt-3"><b>UniqueViolation</b><br>
                  <b>¿Cuándo ocurre?</b> Al intentar insertar un valor duplicado en una columna que tiene una restricción UNIQUE (por ejemplo, un email que ya existe).<br>
                  <b>Ejemplo de código que lo produce:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">with conn.cursor() as cur:
    cur.execute("INSERT INTO usuarios (email) VALUES (%s)", ("correo@ejemplo.com",))
    conn.commit()</code></pre>
                  <b>Mensaje típico:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-text">psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "usuarios_email_key"</code></pre>
                  <b>¿Cómo prevenirlo?</b> Valida previamente si el valor ya existe en la base de datos antes de insertar.<br>
                  <b>¿Cómo solucionarlo?</b> Maneja la excepción y muestra un mensaje claro al usuario.
                </li>
                <li class="mt-3"><b>NotNullViolation</b><br>
                  <b>¿Cuándo ocurre?</b> Cuando intentas insertar un valor nulo en una columna que no lo permite (definida como NOT NULL).<br>
                  <b>Ejemplo de código que lo produce:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">with conn.cursor() as cur:
    cur.execute("INSERT INTO usuarios (nombre) VALUES (%s)", (None,))
    conn.commit()</code></pre>
                  <b>Mensaje típico:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-text">psycopg2.errors.NotNullViolation: null value in column "nombre" violates not-null constraint</code></pre>
                  <b>¿Cómo prevenirlo?</b> Valida que todos los campos obligatorios tengan valor antes de ejecutar la consulta.<br>
                  <b>¿Cómo solucionarlo?</b> Asegúrate de que los datos requeridos nunca sean <code>None</code> o vacíos.
                </li>
                <li class="mt-3"><b>IntegrityError</b><br>
                  <b>¿Cuándo ocurre?</b> Cuando se violan restricciones de integridad, como llaves foráneas (FOREIGN KEY), UNIQUE, CHECK, etc.<br>
                  <b>Ejemplo de código que lo produce:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">with conn.cursor() as cur:
    cur.execute("DELETE FROM usuarios WHERE id = %s", (1,))
    conn.commit()</code></pre>
                  <b>Mensaje típico:</b>
                  <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-text">psycopg2.IntegrityError: update or delete on table "usuarios" violates foreign key constraint</code></pre>
                  <b>¿Cómo prevenirlo?</b> Revisa las relaciones entre tablas y aplica borrado en cascada si es necesario, o elimina primero los registros dependientes.<br>
                  <b>¿Cómo solucionarlo?</b> Elimina los registros dependientes antes de borrar el registro principal, o ajusta las restricciones de la base de datos.
                </li>
              </ul>
              <div class="alert alert-info mt-3"><b>Tip general:</b> Siempre revisa la documentación oficial de psycopg2 y PostgreSQL para entender el significado de cada error y cómo abordarlo.</div>
            </div>
            <b>Buenas prácticas:</b>
            <ul>
              <li>Usa siempre bloques <code>try/except</code> para capturar y manejar errores específicos.</li>
              <li>Utiliza <code>with</code> para manejar conexiones y cursores, asegurando su cierre automático.</li>
              <li>No expongas información sensible en los mensajes de error al usuario final.</li>
              <li>Separa la lógica de conexión de la lógica de negocio.</li>
            </ul>
            <h5 class="mt-4">Actividad Práctica: Diagnóstico de Errores</h5>
            <ul>
              <li>Se proporciona un script con 3 funciones diseñadas para fallar.</li>
              <li>Tarea: identificar la excepción, explicar la causa y corregir el código.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Módulo 3 -->
      <div class="accordion-item" id="modulo3">
        <h2 class="accordion-header" id="heading3">
          <button class="accordion-button collapsed accent fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
            <i class="fas fa-arrows-spin fa-fw"></i> Módulo 3: Implementando un CRUD Robusto
          </button>
        </h2>
        <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="heading3" data-bs-parent="#accordionTaller">
          <div class="accordion-body">
            <h5>Teoría</h5>
            <p>
              El ciclo CRUD (Create, Read, Update, Delete) es la base de cualquier aplicación que maneje datos. Implementar un CRUD robusto en Python con PostgreSQL requiere comprender no solo cómo ejecutar cada operación, sino también cómo proteger la integridad de los datos y la seguridad de la aplicación.
            </p>
            <ul>
              <li><b>El ciclo de vida de los datos (CRUD):</b>
                <ul>
                  <li><b>Create:</b> Insertar nuevos registros en la base de datos.</li>
                  <li><b>Read:</b> Consultar y recuperar datos existentes.</li>
                  <li><b>Update:</b> Modificar registros existentes.</li>
                  <li><b>Delete:</b> Eliminar registros.</li>
                </ul>
              </li>
              <li><b>Importancia de las transacciones (<code>commit</code>/<code>rollback</code>):</b><br>
                Una transacción agrupa varias operaciones en una sola unidad de trabajo.<br>
                Si ocurre un error, puedes hacer <code>rollback</code> para deshacer todos los cambios y evitar datos inconsistentes.<br>
                Si todo sale bien, se confirma con <code>commit</code>.
                <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">try:
    with conn:
        with conn.cursor() as cur:
            cur.execute("UPDATE cuentas SET saldo = saldo - 100 WHERE id = 1")
            cur.execute("UPDATE cuentas SET saldo = saldo + 100 WHERE id = 2")
    print("Transferencia exitosa")
except Exception as e:
    print("Error en la transacción:", e)
</code></pre>
                <div class="alert alert-primary"><b>Tip:</b> Usar <code>with conn:</code> asegura que se haga commit automáticamente si no hay errores, o rollback si ocurre una excepción.</div>
              </li>
              <li><b>Prevención de Inyección SQL:</b><br>
                Nunca construyas consultas SQL concatenando variables directamente.<br>
                Usa siempre parámetros (<code>%s</code>) para evitar ataques de inyección.
                <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python"># Ejemplo inseguro (¡NO HACER!)
cur.execute(f"SELECT * FROM usuarios WHERE email = '{email}'")

# Ejemplo seguro
cur.execute("SELECT * FROM usuarios WHERE email = %s", (email,))
</code></pre>
                <div class="alert alert-warning"><b>Recomendación:</b> Siempre usa parámetros en todas tus consultas.</div>
              </li>
              <li><b>Manejo correcto de cursores:</b><br>
                Usa <code>with conn.cursor() as cur:</code> para asegurar el cierre automático del cursor y evitar fugas de recursos.
              </li>
            </ul>
            <b>Ejemplo completo de CRUD seguro:</b>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">def crear_usuario(conn, nombre, email):
    with conn.cursor() as cur:
        cur.execute(
            "INSERT INTO usuarios (nombre, email) VALUES (%s, %s)",
            (nombre, email)
        )
        conn.commit()

def obtener_usuarios(conn):
    with conn.cursor() as cur:
        cur.execute("SELECT id, nombre, email FROM usuarios")
        return cur.fetchall()

def actualizar_usuario(conn, id, nombre):
    with conn.cursor() as cur:
        cur.execute(
            "UPDATE usuarios SET nombre = %s WHERE id = %s",
            (nombre, id)
        )
        conn.commit()

def eliminar_usuario(conn, id):
    with conn.cursor() as cur:
        cur.execute("DELETE FROM usuarios WHERE id = %s", (id,))
        conn.commit()
</code></pre>
            <div class="alert alert-primary"><b>Tip:</b> Siempre maneja las excepciones y haz rollback si ocurre un error en cualquier operación de escritura.</div>
            <h5 class="mt-4">Actividad Práctica: Implementación de CRUD</h5>
            <ul>
              <li>Implementar las funciones <code>crear_usuario</code>, <code>obtener_usuarios</code>, <code>actualizar_usuario</code> y <code>eliminar_usuario</code>.</li>
              <li>Usar el depurador para verificar que las operaciones se realizan correctamente.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Módulo 4 -->
      <div class="accordion-item" id="modulo4">
        <h2 class="accordion-header" id="heading4">
          <button class="accordion-button collapsed accent fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
            <i class="fas fa-robot fa-fw"></i> Módulo 4: Tu Asistente de IA Personal
          </button>
        </h2>
        <div id="collapse4" class="accordion-collapse collapse" aria-labelledby="heading4" data-bs-parent="#accordionTaller">
          <div class="accordion-body">
            <h5>Teoría</h5>
            <p>
              La inteligencia artificial (IA) está revolucionando la forma en que los desarrolladores programan, depuran y mejoran su código. Herramientas como <b>GitHub Copilot</b> y <b>ChatGPT</b> pueden analizar fragmentos de código, sugerir mejoras, detectar vulnerabilidades y explicar errores en lenguaje natural.
            </p>
            <ul>
              <li><b>¿Qué es un asistente de IA para desarrolladores?</b><br>
                Son herramientas basadas en modelos de lenguaje (LLM) entrenados con grandes cantidades de código y documentación.<br>
                Pueden sugerir líneas de código, completar funciones, detectar errores comunes y recomendar buenas prácticas.<br>
                Ejemplos populares: <b>GitHub Copilot</b>, <b>ChatGPT</b>, <b>Amazon CodeWhisperer</b>.
              </li>
              <li><b>Ventajas de usar IA en el desarrollo:</b>
                <ul>
                  <li>Ahorro de tiempo en tareas repetitivas o de bajo valor.</li>
                  <li>Aprendizaje acelerado: puedes preguntar "¿qué hace este código?" o "¿cómo mejoro esta función?" y obtener respuestas inmediatas.</li>
                  <li>Detección temprana de vulnerabilidades y errores lógicos.</li>
                  <li>Generación de ejemplos y documentación personalizada.</li>
                </ul>
              </li>
              <li><b>Limitaciones y precauciones:</b>
                <ul>
                  <li>La IA puede sugerir código incorrecto, inseguro o no óptimo.</li>
                  <li>Siempre revisa y entiende las sugerencias antes de aplicarlas.</li>
                  <li>No reemplaza el criterio profesional ni la revisión manual.</li>
                  <li>Puede no estar actualizada con las mejores prácticas más recientes.</li>
                </ul>
              </li>
            </ul>
            <div class="alert alert-primary"><b>Tip:</b> Utiliza la IA como apoyo, no como reemplazo de tu razonamiento y experiencia.</div>
            <b>Ejemplo de uso de IA para revisión de código:</b>
            <p>Supón que tienes este fragmento inseguro:</p>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">cur.execute(f"UPDATE usuarios SET nombre = '{nombre}' WHERE id = {id}")</code></pre>
            <p>Puedes pedirle a la IA:</p>
            <blockquote>¿Ves algún error de seguridad o mejora en este fragmento de código Python para PostgreSQL?</blockquote>
            <p><b>Sugerencia de la IA:</b></p>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">cur.execute("UPDATE usuarios SET nombre = %s WHERE id = %s", (nombre, id))</code></pre>
            <div class="alert alert-warning"><b>Recomendación:</b> Compara siempre las sugerencias de la IA con la documentación oficial y tus propias pruebas.</div>
            <h5 class="mt-4">Actividad Práctica: Revisión de Código Asistida por IA</h5>
            <ul>
              <li>Usa una IA (como ChatGPT o Copilot) para revisar el siguiente fragmento de código:</li>
            </ul>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">def actualizar_usuario(conn, id, nombre):
    cur = conn.cursor()
    cur.execute(f"UPDATE usuarios SET nombre = '{nombre}' WHERE id = {id}")
    conn.commit()
    cur.close()
</code></pre>
            <ul>
              <li>Pide a la IA que detecte errores de seguridad o mejoras.</li>
              <li>Compara las sugerencias de la IA con tus propias correcciones.</li>
              <li>Reflexiona sobre las ventajas y limitaciones de la revisión asistida por IA.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Módulo 5 -->
      <div class="accordion-item" id="modulo5">
        <h2 class="accordion-header" id="heading5">
          <button class="accordion-button collapsed accent fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
            <i class="fas fa-broom fa-fw"></i> Módulo 5: Refactorización y Código Limpio
          </button>
        </h2>
        <div id="collapse5" class="accordion-collapse collapse" aria-labelledby="heading5" data-bs-parent="#accordionTaller">
          <div class="accordion-body">
            <h5>Teoría</h5>
            <p>
              La refactorización es el proceso de mejorar la estructura interna del código sin cambiar su funcionalidad externa. Un código limpio y bien estructurado es más fácil de mantener, menos propenso a errores y más seguro.
            </p>
            <ul>
              <li><b>¿Por qué es importante refactorizar?</b><br>
                Facilita la lectura y el mantenimiento del código.<br>
                Reduce la duplicidad y la complejidad.<br>
                Permite detectar y corregir errores más fácilmente.<br>
                Hace que el código sea más seguro y escalable.
              </li>
              <li><b>Principio DRY (“Don't Repeat Yourself”):</b><br>
                Evita duplicar lógica y fragmentos de código.<br>
                Extrae funciones y clases reutilizables para tareas repetitivas.
              </li>
              <li><b>Uso de manejadores de contexto (<code>with</code>):</b><br>
                Los manejadores de contexto aseguran el cierre automático de recursos como conexiones y cursores, incluso si ocurre un error.<br>
                Usar <code>with</code> evita fugas de recursos y reduce el riesgo de errores sutiles.
              </li>
              <li><b>Separar lógica de negocio del acceso a datos:</b><br>
                Mantén la lógica de negocio (reglas, validaciones, procesos) separada del acceso a la base de datos.<br>
                Utiliza funciones y clases bien definidas para cada responsabilidad.
              </li>
            </ul>
            <b>Ejemplo de código mal estructurado:</b>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">import psycopg2
conn = psycopg2.connect(...)
def crear_usuario(nombre):
    cur = conn.cursor()
    cur.execute("INSERT INTO usuarios (nombre) VALUES ('%s')" % nombre)
    conn.commit()
    cur.close()
</code></pre>
            <b>Problemas:</b>
            <ul>
              <li>No usa manejadores de contexto.</li>
              <li>Es vulnerable a inyección SQL.</li>
              <li>No separa la lógica de conexión de la lógica de negocio.</li>
              <li>No maneja errores.</li>
            </ul>
            <b>Refactorización correcta:</b>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">import os
import psycopg2

class DatabaseManager:
    def __init__(self):
        self.conn = psycopg2.connect(
            dbname=os.getenv('DB_NAME'),
            user=os.getenv('DB_USER'),
            password=os.getenv('DB_PASS'),
            host=os.getenv('DB_HOST')
        )
    def crear_usuario(self, nombre):
        with self.conn.cursor() as cur:
            cur.execute("INSERT INTO usuarios (nombre) VALUES (%s)", (nombre,))
            self.conn.commit()
    def close(self):
        self.conn.close()
</code></pre>
            <b>Ventajas de la refactorización:</b>
            <ul>
              <li>El código es más seguro, legible y fácil de mantener.</li>
              <li>Se aprovechan los manejadores de contexto.</li>
              <li>Se evita la inyección SQL usando parámetros.</li>
              <li>La lógica de acceso a datos está encapsulada en una clase.</li>
            </ul>
            <div class="alert alert-primary"><b>Tip:</b> Refactoriza tu código periódicamente, especialmente después de agregar nuevas funcionalidades o corregir errores.</div>
            <div class="alert alert-warning"><b>Recomendación:</b> Crea pruebas automatizadas para validar que la refactorización no cambió la funcionalidad del sistema.</div>
            <b>Ejemplo para refactorizar (prueba y mejora este código):</b>
            <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">import psycopg2

def crear_usuario(nombre, email):
    conn = psycopg2.connect(
        dbname="midb",
        user="usuario",
        password="contraseña_segura",
        host="localhost"
    )
    cur = conn.cursor()
    cur.execute("INSERT INTO usuarios (nombre, email) VALUES ('%s', '%s')" % (nombre, email))
    conn.commit()
    cur.close()
    conn.close()

# Prueba
ecrear_usuario("Juan", "juan@email.com")
</code></pre>
            <div class="alert alert-info"><b>Instrucción:</b> Copia el bloque anterior, ejecútalo (ajustando los datos de conexión si es necesario) y luego refactorízalo para:<ul><li>Usar parámetros en la consulta.</li><li>Manejar errores con <code>try/except</code>.</li><li>Usar <code>with</code> para conexiones y cursores.</li><li>Separar la lógica de conexión en una clase o función aparte.</li></ul></div>
            <h5 class="mt-4">Actividad Práctica: Refactorización Guiada</h5>
            <ul>
              <li>Se proporciona un script mal estructurado.</li>
              <li>Tarea: refactorizarlo para usar sentencias <code>with</code> y una clase <code>DatabaseManager</code>.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Módulo 6 -->
      <div class="accordion-item" id="modulo6">
        <h2 class="accordion-header" id="heading6">
          <button class="accordion-button collapsed accent fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
            <i class="fas fa-graduation-cap fa-fw"></i> Módulo 6: Proyecto Integrador – Sistema de Gestión Académica (Terminal)
          </button>
        </h2>
        <div id="collapse6" class="accordion-collapse collapse" aria-labelledby="heading6" data-bs-parent="#accordionTaller">
          <div class="accordion-body">
            <h5>Teoría</h5>
            <p>
              En este módulo, aplicarás todos los conceptos vistos en el taller para construir un sistema real de gestión académica desde la terminal. El objetivo es que practiques la configuración segura, manejo de errores, operaciones CRUD, buenas prácticas de código y refactorización en un proyecto completo.
            </p>
            <b>Descripción del proyecto:</b>
            <ul>
              <li>Registrar alumnos y sus datos personales.</li>
              <li>Registrar programas/carreras.</li>
              <li>Registrar y consultar notas de los alumnos en diferentes programas.</li>
              <li>Consultar reportes de alumnos, programas y notas.</li>
              <li>Todo el flujo será a través de la terminal (no interfaz gráfica).</li>
            </ul>
            <b>Parámetros y Requisitos del Proyecto</b>
            <ul>
              <li><b>Estructura de la base de datos (sugerida):</b>
                <ul>
                  <li>Tabla <code>alumnos</code> (id, nombre, email, programa_id)</li>
                  <li>Tabla <code>programas</code> (id, nombre_programa)</li>
                  <li>Tabla <code>notas</code> (id, alumno_id, materia, nota)</li>
                </ul>
              </li>
              <li><b>Funcionalidades mínimas:</b>
                <ul>
                  <li>Agregar, listar, actualizar y eliminar alumnos.</li>
                  <li>Agregar, listar, actualizar y eliminar programas.</li>
                  <li>Registrar y consultar notas de los alumnos.</li>
                  <li>Consultar reportes de alumnos por programa y promedio de notas.</li>
                  <li>Validar datos y manejar errores (por ejemplo, no permitir emails duplicados, notas fuera de rango, etc).</li>
                </ul>
              </li>
              <li><b>Buenas prácticas requeridas:</b>
                <ul>
                  <li>Uso de variables de entorno para la conexión.</li>
                  <li>Uso de <code>with</code> para conexiones y cursores.</li>
                  <li>Manejo de errores con <code>try/except</code>.</li>
                  <li>Consultas SQL seguras (parámetros).</li>
                  <li>Separar la lógica de acceso a datos de la lógica de negocio.</li>
                  <li>Código modular y refactorizado.</li>
                </ul>
              </li>
              <li><b>Interfaz por terminal:</b>
                <ul>
                  <li>El usuario debe poder elegir opciones mediante un menú textual.</li>
                  <li>Ejemplo de menú:</li>
                </ul>
                <pre class="bg-light rounded-3 p-3 mb-2"><code class="language-python">def mostrar_menu():
    print("""\nSistema de Gestión Académica
1. Registrar alumno
2. Listar alumnos
3. Registrar programa
4. Listar programas
5. Registrar nota
6. Consultar notas de un alumno
7. Reporte de promedios por programa
0. Salir
""")
</code></pre>
              </li>
              <li><b>Sugerencia de organización de archivos:</b>
                <ul>
                  <li><code>main.py</code> (menú y flujo principal)</li>
                  <li><code>db.py</code> (conexión y funciones de acceso a la base de datos)</li>
                  <li><code>.env</code> (variables de entorno)</li>
                  <li><code>README.md</code> (instrucciones de uso)</li>
                </ul>
              </li>
            </ul>
            <h5 class="mt-4">Actividad Final</h5>
            <p>
              Desarrolla el sistema completo siguiendo los parámetros anteriores.<br>
              <b>Tip:</b> Comienza por diseñar la base de datos y las funciones CRUD para cada entidad.<br>
              <b>Recomendación:</b> Refactoriza tu código a medida que avanzas y documenta cada función.
            </p>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    Taller de Desarrollo Avanzado © 2025
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Prism.js JS para resaltado de sintaxis -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
</body>
</html> 